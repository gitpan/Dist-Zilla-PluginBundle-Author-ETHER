name                = Dist-Zilla-PluginBundle-Author-ETHER
author              = Karen Etheridge <ether@cpan.org>
copyright_holder    = Karen Etheridge
copyright_year      = 2013
license             = Perl_5

[ModuleShareDirs]
Dist::Zilla::MintingProfile::Author::ETHER = profiles

[GatherDir::Template / profile.ini]
root   = profiles/github/build_templates
prefix = profiles/github

[Test::Kwalitee]

;[Test::Kwalitee::Extra]
;arg = !has_example
;arg = !has_test_pod_coverage
;; this trips up on nonexistent examples/ (mentioned in no_index),
;; and profiles/.../Module.pm
;arg = !prereq_matches_use
; and after all that, we fail because we planned 27 and only ran 25.
; FIXME with a real plugin!!

[Prereqs / PluginBundle (direct)]
-phase = runtime
-relationship = requires
Dist::Zilla::Plugin::Git::NextVersion = 0
Dist::Zilla::Plugin::GithubMeta = 0
Dist::Zilla::Plugin::AutoMetaResources = 0
Dist::Zilla::Plugin::Authority = 0
Dist::Zilla::Plugin::MetaNoIndex = 0
Dist::Zilla::Plugin::MetaProvides::Package = 0
Dist::Zilla::Plugin::MetaConfig = 0
;Dist::Zilla::Plugin::ContributorsFromGit = 0
Dist::Zilla::Plugin::ExecDir = 0
Dist::Zilla::Plugin::ShareDir = 0
Dist::Zilla::Plugin::FileFinder::ByName = 0
Dist::Zilla::Plugin::Git::GatherDir = 0
Dist::Zilla::Plugin::MetaYAML = 0
Dist::Zilla::Plugin::MetaJSON = 0
Dist::Zilla::Plugin::License = 0
Dist::Zilla::Plugin::Readme = 0
Dist::Zilla::Plugin::Manifest = 0
Dist::Zilla::Plugin::Test::Compile = 2.010
Dist::Zilla::Plugin::Test::CheckDeps = 0.007
Dist::Zilla::Plugin::NoTabsTests = 0
Dist::Zilla::Plugin::EOLTests = 0
Dist::Zilla::Plugin::MetaTests = 0
Dist::Zilla::Plugin::Test::Version = 0
Dist::Zilla::Plugin::Test::CPAN::Changes = 0.008
Dist::Zilla::Plugin::Test::ChangesHasContent = 0
Dist::Zilla::Plugin::Test::MinimumVersion = 2.000003
Dist::Zilla::Plugin::Test::UnusedVars = 0
Dist::Zilla::Plugin::PodSyntaxTests = 0
Dist::Zilla::Plugin::PodCoverageTests = 0
Dist::Zilla::Plugin::Test::PodSpelling = 0
;Dist::Zilla::Plugin::Test::Pod::LinkCheck = 0
Dist::Zilla::Plugin::Test::Pod::No404s = 0
Dist::Zilla::Plugin::PruneCruft = 0
Dist::Zilla::Plugin::ManifestSkip = 0
Dist::Zilla::Plugin::Git::Describe = 0
Dist::Zilla::Plugin::PkgVersion = 0
Dist::Zilla::Plugin::PodWeaver = 0
Dist::Zilla::Plugin::NextRelease = 4.300018
Dist::Zilla::Plugin::AutoPrereqs = 0
Dist::Zilla::Plugin::MinimumPerl = 0
Dist::Zilla::Plugin::ReadmeAnyFromPod = 0
Dist::Zilla::Plugin::InstallGuide = 0
Dist::Zilla::Plugin::CopyFilesFromBuild = 0
Dist::Zilla::Plugin::Run::AfterBuild = 0
Dist::Zilla::Plugin::RunExtraTests = 0
Dist::Zilla::Plugin::Git::Check = 0
Dist::Zilla::Plugin::Git::CheckFor::MergeConflicts = 0
Dist::Zilla::Plugin::Git::CheckFor::CorrectBranch = 0
Dist::Zilla::Plugin::Git::Remote::Check = 0
Dist::Zilla::Plugin::CheckPrereqsIndexed = 0
Dist::Zilla::Plugin::TestRelease = 0
Dist::Zilla::Plugin::UploadToCPAN = 0
Dist::Zilla::Plugin::Git::Commit = 0
Dist::Zilla::Plugin::Git::Tag = 0
Dist::Zilla::Plugin::Git::Push = 0
Dist::Zilla::Plugin::GitHub::Update = 0
Dist::Zilla::Plugin::InstallRelease = 0
Dist::Zilla::Plugin::ConfirmRelease = 0
; FIXME: [PodWeaver] needs to inject plugin and section prereqs
Pod::Weaver::PluginBundle::Default = 0
Pod::Weaver::Plugin::Transformer = 0
Pod::Elemental::Transformer::List = 0
Pod::Weaver::Plugin::StopWords = 0
Pod::Weaver::Plugin::Encoding = 0

; these should all be injected by the plugins themselves; patches are pending.
[Prereqs / PluginBundle (indirect)]
-phase = runtime
-relationship = requires
Text::Tabs = 2013.0426
Test::Spelling = 0.19
Test::Vars = 0.004
CPAN::Changes = 0.23

[Prereqs / PluginBundle (indirect, optional)]
-phase = runtime
-relationship = recommends
Dist::Zilla::Plugin::MakeMaker = 0
Dist::Zilla::Plugin::ModuleBuildTiny = 0.004

[Prereqs / MintingProfile]
; TODO: these should be added
; automatically by Dist::Zilla::Role::MintingProfile::ShareDir
-phase = runtime
-relationship = requires
Dist::Zilla::Plugin::TemplateModule = 0
Dist::Zilla::Plugin::GatherDir::Template = 0
Dist::Zilla::Plugin::GenerateFile = 0
Dist::Zilla::Plugin::Git::Init = 0
Dist::Zilla::Plugin::GitHub::Create = 0.35
Dist::Zilla::Plugin::Git::PushInitial = 0
Dist::Zilla::Plugin::Run::AfterMint = 0
; for s/::/-/gr in profiles/github/skel/t/01-basic.t
perl = 5.013002

; These prereqs are for the local weaver.ini, not the weaver.ini being
; used in dists that use this plugin bundle.
; TODO: [PodWeaver] should inject develop prereqs on all the
; PW plugins/transformers/sections it sees in weaver.ini
; authordep Pod::Weaver::PluginBundle::Default
; authordep Pod::Weaver::Plugin::Transformer
; authordep Pod::Elemental::Transformer::List
; authordep Pod::Weaver::Plugin::StopWords
; authordep Pod::Weaver::Plugin::Encoding

[Prereqs / release_tests]
-phase = runtime
-relationship = recommends
Test::Spelling = 0.19
Pod::Wordlist::hanekomu = 0
Test::CPAN::Changes = 0
Test::CPAN::Meta = 0
Test::EOL = 0
Test::MinimumVersion = 0
Test::NoTabs = 0
Test::Vars = 0.004
Test::Pod::Coverage = 1.08
Pod::Coverage::TrustPod = 0
Test::Pod::No404s = 0
Test::Pod = 1.41

; these should all be injected by the plugins themselves; patches are pending.
[Prereqs / missing_test_injections]
-phase = develop
-relationship = requires
Test::Spelling = 0.19
Pod::Wordlist::hanekomu = 0
Test::Vars = 0.004
Test::EOL = 0
Test::Kwalitee = 1.09
Test::MinimumVersion = 0
Test::NoTabs = 0
Test::Pod::No404s = 0
Test::Version = 0
; except this one, which is not added by a plugin
Test::CleanNamespaces = 0

; must run before [Git::Commit]
[Run::AfterRelease]
run = perl -p -i -e'BEGIN { undef $/ }; s/(\[\@Author::ETHER\].:version = )[\d\.]+/${1}%v/ms;' %d/dist.ini
run = if [[ -d ~/git/mydists ]]; then perl -p -i -e'BEGIN { undef $/ }; s/(\[\@Author::ETHER\].:version = )[\d\.]+/${1}%v/ms;' ~/git/mydists/*/dist.ini; fi
run = if [[ -d ~/git/adopteddists ]]; then perl -p -i -e'BEGIN { undef $/ }; s/(\[\@Author::ETHER\].:version = )[\d\.]+/${1}%v/ms;' ~/git/adopteddists/*/dist.ini; fi

[Test::CPAN::Changes]

[@Author::ETHER]
; FIXME: Module.pm in profiles/ has no version, does not have parsable pod
; nor resolvable URIs
; it should be ignorable -- these plugins should be updated so they use
; FileFinders and Filters, OR simply to prune auto/*
-remove = Test::Version
-remove = PodCoverageTests
-remove = Test::Pod::No404s
; TODO: this should be done automatically with a plugin that uses
; [Git::NextVersion] and [%Git] to inject a prereq, as well as a runtime
; version check
:version = 0.012
installer = MakeMaker
MetaNoIndex.directory[] = profiles
Test::MinimumVersion.max_target_perl = 5.018000
; copy the version bump we did above in [Run::AfterRelease]
CopyFilesFromBuild.copy[] = dist.ini
; ...and commit it
Git::Commit.allow_dirty[] = dist.ini
NextRelease.time_zone = UTC
NextRelease.format = %-8V  %{yyyy-MM-dd HH:mm:ss'Z'}d (%U)
